<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>赵海</title>
    <link rel="stylesheet" href="/assets/css/test/resize.css" />
    <script src="/assets/js/libs/jquery-1.8.3.min.js"></script>
    <script src="/assets/js/libs/jquery.ba-resize.js"></script>
</head>
<body>
    <div class="body-container">
        <!--头部Start-->
        <div class="header">
            <div class="header-box">
                <h3>ZH-WEB</h3>
                <a class="btn-back" href="../index.html">
                    <i class="arrow-left"></i>
                    <i class="arrow-body"></i>
                </a>
            </div>
        </div>
        <!--头部End-->
        <div class="main-container">
            <div class="window-info"></div>
            <h1>实时监听块级元素P的大小</h1>
            <div class="test-box">
                <div class="info" style="background: #ffab3f;"></div>
                <p class="test-block"><a class="add-text" href="javascript: void (0);">点击增加文本</a><em>Notice that the info box updates immediately, because the resize event is being triggered manually on click with .resize(). Resize the browser window to be smaller with the mouse to see the info box update more slowly.</em></p>
            </div>
            <h1>实时监听iframe的大小</h1>
            <div class="iframe-box">
                <div class="iframe-info" style="background: #ffab3f;width: 300px;"></div>
                <iframe class="iframe" src="resize-event-iframe.shtml" frameborder="1" scrolling="no"></iframe>
            </div>
            <h1>实时监听Textarea</h1>
            <div class="textarea-info" style="background: #ffab3f;width: 300px;"></div>
            <textarea class="textarea-box" style="width:300px;height: 100px;">Drag to resize in Safari or Chrome. Notice that the info box updates slowly, because the resize event is *not* being triggered manually. (How could it? You're dragging a proprietary browser control!)</textarea>
        </div>
    </div>
<script>
    $(function () {
        $(window).resize(function () {
            var elem = $(this);
            $('.window-info').text( '窗口大小 width:' + elem.width() + ',height:' + elem.height() );
        });
        $(window).resize();

        /* 块级元素 */
        var block = $('.test-block');
        $('.info').text( block[0].tagName + ' width: ' + block.width() + ', height: ' + block.height() );
        block.resize(function () {
            var elem = $(this);
            elem.closest('.test-box').find('.info').text( this.tagName + ' width: ' + elem.width() + ', height: ' + elem.height() );
        });
        block.resize();
        $('.add-text').click(function () {
            $(this).parent().append('Adding some more text, to grow the parent container!');
        });
        $('.add-text').click(function(){
            $(this).parent().resize();
        });

        /* iframe */
        var iframe = $('.iframe');
        iframe.load(function () {
            var iframe_content = iframe.contents().find('body');
            iframe_content.resize(function () {
                var elem = $(this);
                iframe.css( {height:elem.outerHeight(true)} );
                $('.iframe-info').text( 'iFrame width: ' + iframe.width() + ', height: ' + iframe.height() );
            });
            iframe_content.resize();
        });

        /* textarea */
        var textarea = $('.textarea-box');
        textarea.resize(function () {
            var elem = $(this);
            $('.textarea-info').text('textarea width:' + ((elem.width())+2) + ',height:' + ((elem.height())+2) );
        });
        textarea.resize();
        $('.textarea-info').text('textarea width:' + ((textarea.width())+2) + ',height:' + ((textarea.height())+2) );
    })
</script>
</body>
</html>